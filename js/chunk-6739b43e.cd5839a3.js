(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6739b43e"],{"21cb":function(t,a,e){"use strict";e.r(a);var i=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"container"},[e("div",{staticClass:"row mt-3"},[e("div",{staticClass:"mr-auto"},[e("Pagination",{attrs:{"current-page":t.page,"total-page":t.totalPage},on:{"change-page":t.changePage}})],1),e("button",{staticClass:"btn btn-primary btn-add",attrs:{type:"button"},on:{click:function(a){return t.toggleModal("new")}}},[e("font-awesome-icon",{staticClass:"nav-icon",attrs:{icon:["fas","plus-square"]}}),t._v(" 新增愛兔文章 ")],1)]),e("div",{staticClass:"row mt-3"},[e("table",{staticClass:"table table-bordered"},[t._m(0),e("tbody",t._l(t.filtedAcademy,(function(a,i){return e("tr",{key:"academy_"+i},[e("td",{staticClass:"align-middle col-index",attrs:{scope:"row"}},[t._v(t._s(t.paged*(t.page-1)+i+1))]),e("td",{staticClass:"align-middle col-img"},[t._v(" "+t._s(a.data.title)+" ")]),e("td",{staticClass:"align-middle col-del"},[e("div",{staticClass:"btn-group",attrs:{role:"group"}},[e("button",{staticClass:"btn btn-outline-primary",attrs:{type:"button"},on:{click:function(a){return t.toggleModal(i)}}},[e("font-awesome-icon",{staticClass:"nav-icon",attrs:{icon:["fas","edit"]}}),t._v(" 編輯 ")],1),e("button",{staticClass:"btn btn-outline-warning",attrs:{type:"button"},on:{click:function(e){return t.triggerDelete(a.id)}}},[e("font-awesome-icon",{staticClass:"nav-icon",attrs:{icon:["fas","trash-alt"]}}),t._v(" 刪除 ")],1)])])])})),0)])]),e("div",{staticClass:"modal fade bd-example-modal-xl",attrs:{tabindex:"-1",role:"dialog","aria-labelledby":"academyModal","aria-hidden":"true",id:"academyModal"}},[e("div",{staticClass:"modal-dialog modal-xl"},[e("div",{staticClass:"modal-content"},[e("div",{staticClass:"modal-body"},[e("div",{staticClass:"container-fluid"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col"},[e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"title"}},[t._v("愛兔文章標題")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.editingAcademy.title,expression:"editingAcademy.title"}],staticClass:"form-control",attrs:{type:"text",name:"title",id:"title"},domProps:{value:t.editingAcademy.title},on:{input:function(a){a.target.composing||t.$set(t.editingAcademy,"title",a.target.value)}}})]),e("div",{staticClass:"form-row mt-3"},[e("div",{staticClass:"col"},[e("label",{attrs:{for:"content"}},[t._v("愛兔文章內容")]),e("vue-editor",{attrs:{customModules:t.customModulesForEditor,editorOptions:t.editorSettings},model:{value:t.editingAcademy.content,callback:function(a){t.$set(t.editingAcademy,"content",a)},expression:"editingAcademy.content"}})],1)])])])])]),e("div",{staticClass:"modal-footer"},[e("button",{staticClass:"btn btn-secondary",attrs:{type:"button","data-dismiss":"modal"}},[t._v("取消")]),e("button",{directives:[{name:"show",rawName:"v-show",value:!t.isCreating,expression:"!isCreating"}],staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:function(a){return t.updateAcademy(t.editingId)}}},[t._v(" 儲存修改 ")]),e("button",{directives:[{name:"show",rawName:"v-show",value:t.isCreating,expression:"isCreating"}],staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:t.addAcademy}},[t._v(" 新增文章 ")])])])])])])},n=[function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("thead",[e("tr",[e("th",{staticClass:"col-index"},[t._v("編號")]),e("th",{staticClass:"col-img"},[t._v("愛兔文章標題")]),e("th",{staticClass:"col-del"},[t._v("編輯")])])])}],s=e("6ea1"),o=s["a"],d=(e("b4db"),e("2877")),c=Object(d["a"])(o,i,n,!1,null,"51ca458b",null);a["default"]=c.exports},"3a96":function(t,a,e){},"6ea1":function(t,a,e){"use strict";(function(t){e("4160"),e("fb6a"),e("159b");var i=e("1799"),n=e("b22f"),s=e("f318"),o=e.n(s);a["a"]={components:{Pagination:i["a"]},props:{token:String,tokenReady:Boolean},data:function(){return{page:1,paged:15,totalPage:1,academy:[],customModulesForEditor:[{alias:"imageResize",module:o.a}],editorSettings:{modules:{imageResize:{}}},editingId:"",editingAcademy:{},isCreating:!0}},methods:{getAcademy:function(){var t=this,a=this.$loading.show();n["a"].orderBy("created","desc").get().then((function(e){a.hide(),e.forEach((function(a){t.academy.push({id:a.id,data:a.data()})})),t.totalPage=Math.ceil(t.academy.length/t.paged)}))},addAcademy:function(){var a=this,e=this.$loading.show();this.editingAcademy.created=Math.floor(Date.now()/1e3),this.editingAcademy.updated=Math.floor(Date.now()/1e3),n["a"].add(this.editingAcademy).then((function(){e.hide(),t("#academyModal").modal("hide"),a.academy=[],a.getAcademy()}))},updateAcademy:function(a){var e=this,i=this.$loading.show();this.editingAcademy.updated=Math.floor(Date.now()/1e3),n["a"].doc(a).update(this.editingAcademy).then((function(){i.hide(),t("#academyModal").modal("hide"),e.academy=[],e.getAcademy()}))},deleteAcademy:function(t){var a=this,e=this.$loading.show();n["a"].doc(t).delete().then((function(){e.hide(),a.academy=[],a.getAcademy()}))},triggerDelete:function(t){var a=this;this.$swal({icon:"warning",text:"確認刪除此篇愛兔文章嗎？",showCancelButton:!0,reverseButtons:!0,confirmButtonText:"確定",cancelButtonText:"取消"}).then((function(e){var i=e.isConfirmed;return!!i&&a.deleteAcademy(t)}))},toggleModal:function(a){"new"===a?(this.isCreating=!0,this.editingAcademy={title:"",content:""},t("#academyModal").modal("show")):(this.isCreating=!1,this.editingId=this.academy[a].id,this.editingAcademy=this._.cloneDeep(this.academy[a].data),t("#academyModal").modal("show"))},changePage:function(t){this.page=t}},created:function(){this.tokenReady&&this.getAcademy()},watch:{tokenReady:function(t){t&&this.getAcademy()}},computed:{filtedAcademy:function(){var t=(this.page-1)*this.paged,a=this.page*this.paged;return this.academy.slice(t,a)}}}}).call(this,e("1157"))},b4db:function(t,a,e){"use strict";var i=e("3a96"),n=e.n(i);n.a},fb6a:function(t,a,e){"use strict";var i=e("23e7"),n=e("861d"),s=e("e8b5"),o=e("23cb"),d=e("50c4"),c=e("fc6a"),l=e("8418"),r=e("b622"),u=e("1dde"),m=e("ae40"),g=u("slice"),h=m("slice",{ACCESSORS:!0,0:0,1:2}),y=r("species"),f=[].slice,v=Math.max;i({target:"Array",proto:!0,forced:!g||!h},{slice:function(t,a){var e,i,r,u=c(this),m=d(u.length),g=o(t,m),h=o(void 0===a?m:a,m);if(s(u)&&(e=u.constructor,"function"!=typeof e||e!==Array&&!s(e.prototype)?n(e)&&(e=e[y],null===e&&(e=void 0)):e=void 0,e===Array||void 0===e))return f.call(u,g,h);for(i=new(void 0===e?Array:e)(v(h-g,0)),r=0;g<h;g++,r++)g in u&&l(i,r,u[g]);return i.length=r,i}})}}]);
//# sourceMappingURL=chunk-6739b43e.cd5839a3.js.map