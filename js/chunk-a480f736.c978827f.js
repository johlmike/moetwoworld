(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-a480f736"],{"057f":function(t,e,i){var o=i("fc6a"),n=i("241c").f,r={}.toString,a="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],s=function(t){try{return n(t)}catch(e){return a.slice()}};t.exports.f=function(t){return a&&"[object Window]"==r.call(t)?s(t):n(o(t))}},2247:function(t,e,i){"use strict";var o=i("31ee"),n=i.n(o);n.a},2865:function(t,e,i){"use strict";var o=i("99aa"),n=i.n(o);n.a},"2f54":function(t,e,i){"use strict";(function(t){i("a4d3"),i("e01a"),i("99af"),i("4de4"),i("b0c0");var o=i("f318"),n=i.n(o);e["a"]={props:{product:Object,isCreating:Boolean},data:function(){return{baseUrl:"https://course-ec-api.hexschool.io/api/",uuid:"0ace4b59-2bf0-443c-968c-4c9a458d1cb9",customModulesForEditor:[{alias:"imageResize",module:n.a}],editorSettings:{modules:{imageResize:{}}},editingProduct:{},errorMsg:""}},methods:{save:function(t){this.checkForm()?this.$emit("save",t,this.editingProduct):this.$emit("alert",this.errorMsg)},checkForm:function(){var t=!0,e="";return this.editingProduct.imageUrl[0]||(t=!1,e+="<span style='font-weight: bold;'>商品圖片</span> 至少需上傳一張<br>"),this.editingProduct.title||(t=!1,e+="<span style='font-weight: bold;'>商品名稱</span> 為必填項目<br>"),this.editingProduct.category||(t=!1,e+="<span style='font-weight: bold;'>商品分類</span> 為必填項目<br>"),this.editingProduct.content||(t=!1,e+="<span style='font-weight: bold;'>商品簡述</span> 為必填項目<br>"),this.editingProduct.description||(t=!1,e+="<span style='font-weight: bold;'>商品說明</span> 為必填項目"),this.errorMsg=e,t},openEditingModal:function(){t("#productModal").modal({backdrop:"static",keyboard:!1,show:!0})},closeEditingModal:function(){t("#productModal").modal("hide")},uploadImg:function(){var e=this,i=document.querySelector("#input-img"),o=i.files[0];if(o){var n=this.$loading.show(),r="".concat(this.baseUrl).concat(this.uuid,"/admin/storage"),a=new FormData;a.append("file",o),this.axios.post(r,a,{headers:{"Content-Type":"mutipart/form-data"}}).then((function(o){n.hide(),i.value="",t(".custom-file-label").html(""),e.editingProduct.imageUrl.unshift(o.data.data.path)})).catch((function(){n.hide()}))}}},created:function(){this.editingProduct=this._.cloneDeep(this.product)},mounted:function(){t('input[type="file"]').change((function(e){var i=e.target.files[0].name;t(".custom-file-label").html(i)}))},watch:{product:function(){this.editingProduct=this._.cloneDeep(this.product)}},computed:{filterImageUrl:function(){return this.editingProduct.imageUrl.filter((function(t){return t}))}}}}).call(this,i("1157"))},"31ee":function(t,e,i){},"4de4":function(t,e,i){"use strict";var o=i("23e7"),n=i("b727").filter,r=i("1dde"),a=i("ae40"),s=r("filter"),c=a("filter");o({target:"Array",proto:!0,forced:!s||!c},{filter:function(t){return n(this,t,arguments.length>1?arguments[1]:void 0)}})},"746f":function(t,e,i){var o=i("428f"),n=i("5135"),r=i("e538"),a=i("9bf2").f;t.exports=function(t){var e=o.Symbol||(o.Symbol={});n(e,t)||a(e,t,{value:r.f(t)})}},"7db0":function(t,e,i){"use strict";var o=i("23e7"),n=i("b727").find,r=i("44d2"),a=i("ae40"),s="find",c=!0,d=a(s);s in[]&&Array(1)[s]((function(){c=!1})),o({target:"Array",proto:!0,forced:c||!d},{find:function(t){return n(this,t,arguments.length>1?arguments[1]:void 0)}}),r(s)},"84b8":function(t,e,i){},"99aa":function(t,e,i){},"99af":function(t,e,i){"use strict";var o=i("23e7"),n=i("d039"),r=i("e8b5"),a=i("861d"),s=i("7b0b"),c=i("50c4"),d=i("8418"),u=i("65f0"),l=i("1dde"),g=i("b622"),p=i("2d00"),f=g("isConcatSpreadable"),m=9007199254740991,h="Maximum allowed index exceeded",v=p>=51||!n((function(){var t=[];return t[f]=!1,t.concat()[0]!==t})),b=l("concat"),P=function(t){if(!a(t))return!1;var e=t[f];return void 0!==e?!!e:r(t)},y=!v||!b;o({target:"Array",proto:!0,forced:y},{concat:function(t){var e,i,o,n,r,a=s(this),l=u(a,0),g=0;for(e=-1,o=arguments.length;e<o;e++)if(r=-1===e?a:arguments[e],P(r)){if(n=c(r.length),g+n>m)throw TypeError(h);for(i=0;i<n;i++,g++)i in r&&d(l,g,r[i])}else{if(g>=m)throw TypeError(h);d(l,g++,r)}return l.length=g,l}})},a4d3:function(t,e,i){"use strict";var o=i("23e7"),n=i("da84"),r=i("d066"),a=i("c430"),s=i("83ab"),c=i("4930"),d=i("fdbf"),u=i("d039"),l=i("5135"),g=i("e8b5"),p=i("861d"),f=i("825a"),m=i("7b0b"),h=i("fc6a"),v=i("c04e"),b=i("5c6c"),P=i("7c73"),y=i("df75"),C=i("241c"),_=i("057f"),w=i("7418"),x=i("06cf"),k=i("9bf2"),$=i("d1e7"),S=i("9112"),U=i("6eeb"),M=i("5692"),O=i("f772"),E=i("d012"),N=i("90e3"),j=i("b622"),I=i("e538"),A=i("746f"),D=i("d44e"),T=i("69f3"),F=i("b727").forEach,B=O("hidden"),J="Symbol",R="prototype",z=j("toPrimitive"),H=T.set,q=T.getterFor(J),Q=Object[R],W=n.Symbol,G=r("JSON","stringify"),K=x.f,L=k.f,V=_.f,X=$.f,Y=M("symbols"),Z=M("op-symbols"),tt=M("string-to-symbol-registry"),et=M("symbol-to-string-registry"),it=M("wks"),ot=n.QObject,nt=!ot||!ot[R]||!ot[R].findChild,rt=s&&u((function(){return 7!=P(L({},"a",{get:function(){return L(this,"a",{value:7}).a}})).a}))?function(t,e,i){var o=K(Q,e);o&&delete Q[e],L(t,e,i),o&&t!==Q&&L(Q,e,o)}:L,at=function(t,e){var i=Y[t]=P(W[R]);return H(i,{type:J,tag:t,description:e}),s||(i.description=e),i},st=d?function(t){return"symbol"==typeof t}:function(t){return Object(t)instanceof W},ct=function(t,e,i){t===Q&&ct(Z,e,i),f(t);var o=v(e,!0);return f(i),l(Y,o)?(i.enumerable?(l(t,B)&&t[B][o]&&(t[B][o]=!1),i=P(i,{enumerable:b(0,!1)})):(l(t,B)||L(t,B,b(1,{})),t[B][o]=!0),rt(t,o,i)):L(t,o,i)},dt=function(t,e){f(t);var i=h(e),o=y(i).concat(ft(i));return F(o,(function(e){s&&!lt.call(i,e)||ct(t,e,i[e])})),t},ut=function(t,e){return void 0===e?P(t):dt(P(t),e)},lt=function(t){var e=v(t,!0),i=X.call(this,e);return!(this===Q&&l(Y,e)&&!l(Z,e))&&(!(i||!l(this,e)||!l(Y,e)||l(this,B)&&this[B][e])||i)},gt=function(t,e){var i=h(t),o=v(e,!0);if(i!==Q||!l(Y,o)||l(Z,o)){var n=K(i,o);return!n||!l(Y,o)||l(i,B)&&i[B][o]||(n.enumerable=!0),n}},pt=function(t){var e=V(h(t)),i=[];return F(e,(function(t){l(Y,t)||l(E,t)||i.push(t)})),i},ft=function(t){var e=t===Q,i=V(e?Z:h(t)),o=[];return F(i,(function(t){!l(Y,t)||e&&!l(Q,t)||o.push(Y[t])})),o};if(c||(W=function(){if(this instanceof W)throw TypeError("Symbol is not a constructor");var t=arguments.length&&void 0!==arguments[0]?String(arguments[0]):void 0,e=N(t),i=function(t){this===Q&&i.call(Z,t),l(this,B)&&l(this[B],e)&&(this[B][e]=!1),rt(this,e,b(1,t))};return s&&nt&&rt(Q,e,{configurable:!0,set:i}),at(e,t)},U(W[R],"toString",(function(){return q(this).tag})),U(W,"withoutSetter",(function(t){return at(N(t),t)})),$.f=lt,k.f=ct,x.f=gt,C.f=_.f=pt,w.f=ft,I.f=function(t){return at(j(t),t)},s&&(L(W[R],"description",{configurable:!0,get:function(){return q(this).description}}),a||U(Q,"propertyIsEnumerable",lt,{unsafe:!0}))),o({global:!0,wrap:!0,forced:!c,sham:!c},{Symbol:W}),F(y(it),(function(t){A(t)})),o({target:J,stat:!0,forced:!c},{for:function(t){var e=String(t);if(l(tt,e))return tt[e];var i=W(e);return tt[e]=i,et[i]=e,i},keyFor:function(t){if(!st(t))throw TypeError(t+" is not a symbol");if(l(et,t))return et[t]},useSetter:function(){nt=!0},useSimple:function(){nt=!1}}),o({target:"Object",stat:!0,forced:!c,sham:!s},{create:ut,defineProperty:ct,defineProperties:dt,getOwnPropertyDescriptor:gt}),o({target:"Object",stat:!0,forced:!c},{getOwnPropertyNames:pt,getOwnPropertySymbols:ft}),o({target:"Object",stat:!0,forced:u((function(){w.f(1)}))},{getOwnPropertySymbols:function(t){return w.f(m(t))}}),G){var mt=!c||u((function(){var t=W();return"[null]"!=G([t])||"{}"!=G({a:t})||"{}"!=G(Object(t))}));o({target:"JSON",stat:!0,forced:mt},{stringify:function(t,e,i){var o,n=[t],r=1;while(arguments.length>r)n.push(arguments[r++]);if(o=e,(p(e)||void 0!==t)&&!st(t))return g(e)||(e=function(t,e){if("function"==typeof o&&(e=o.call(this,t,e)),!st(e))return e}),n[1]=e,G.apply(null,n)}})}W[R][z]||S(W[R],z,W[R].valueOf),D(W,J),E[B]=!0},b03a:function(t,e,i){"use strict";i.r(e);var o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"products-manage container"},[i("div",{staticClass:"row mt-3"},[i("div",{staticClass:"mr-auto"},[i("Pagination",{attrs:{"current-page":t.page,"total-page":t.totalPage},on:{"change-page":t.changePage}})],1),i("button",{staticClass:"btn btn-primary btn-add",attrs:{type:"button"},on:{click:function(e){return t.toggleModal("new")}}},[i("font-awesome-icon",{staticClass:"nav-icon",attrs:{icon:["fas","plus-square"]}}),t._v(" 新增商品 ")],1)]),i("BProductsTable",{staticClass:"mt-3",attrs:{products:t.products,page:t.page,paged:t.paged},on:{"update-product":t.updateProduct,"toggle-enabled":t.toggleEnabled,"toggle-hot":t.toggleHot,"toggle-modal":t.toggleModal,"delete-product":t.deleteProduct}}),i("EditingModal",{ref:"editingModal",attrs:{product:t.editingProduct,"is-creating":t.isCreating},on:{save:t.saveProduct,alert:t.handleFormAlert}})],1)},n=[],r=(i("a4d3"),i("e01a"),i("99af"),i("7db0"),i("4160"),i("b64b"),i("159b"),function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"row"},[i("table",{staticClass:"table table-bordered"},[t._m(0),i("tbody",t._l(t.products,(function(e,o){return i("tr",{key:"product_"+o},[i("td",{staticClass:"align-middle",attrs:{scope:"row"}},[t._v(t._s(t.paged*(t.page-1)+o+1))]),i("td",{staticClass:"align-middle"},[t._v(t._s(e.category))]),i("td",{staticClass:"align-middle"},[t._v(t._s(e.title))]),i("td",{staticClass:"align-middle"},[t._v(t._s(e.origin_price))]),i("td",{staticClass:"align-middle"},[t._v(t._s(e.price))]),i("td",{staticClass:"align-middle"},[t._v(t._s(e.options.stock))]),i("td",{staticClass:"align-middle"},[t._v(t._s(e.unit))]),i("td",{staticClass:"align-middle"},[i("div",{staticClass:"custom-control custom-switch"},[i("input",{staticClass:"custom-control-input",attrs:{type:"checkbox",id:"enabled_"+o},domProps:{checked:e.enabled},on:{input:function(e){return t.toggleEnabled(e,o)}}}),i("label",{staticClass:"custom-control-label",attrs:{for:"enabled_"+o}})])]),i("td",{staticClass:"align-middle"},[i("div",{staticClass:"custom-control custom-switch"},[i("input",{staticClass:"custom-control-input",attrs:{type:"checkbox",id:"hot_"+o},domProps:{checked:e.options.hot},on:{input:function(e){return t.toggleHot(e,o)}}}),i("label",{staticClass:"custom-control-label",attrs:{for:"hot_"+o}})])]),i("td",{staticClass:"align-middle"},[i("div",{staticClass:"btn-group",attrs:{role:"group"}},[i("button",{staticClass:"btn btn-outline-primary",attrs:{type:"button"},on:{click:function(e){return t.toggleModal(o)}}},[i("font-awesome-icon",{staticClass:"nav-icon",attrs:{icon:["fas","edit"]}}),t._v(" 編輯 ")],1),i("button",{staticClass:"btn btn-outline-warning",attrs:{type:"button"},on:{click:function(e){return t.triggerDelete(o)}}},[i("font-awesome-icon",{staticClass:"nav-icon",attrs:{icon:["fas","trash-alt"]}}),t._v(" 刪除 ")],1)])])])})),0)])])}),a=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("thead",[i("tr",[i("th",[t._v("編號")]),i("th",[t._v("分類")]),i("th",[t._v("商品名稱")]),i("th",[t._v("原價")]),i("th",[t._v("售價")]),i("th",[t._v("庫存")]),i("th",[t._v("單位")]),i("th",[t._v("上架")]),i("th",[t._v("熱門")]),i("th",[t._v("編輯")])])])}],s=(i("a9e3"),{props:{products:Array,page:Number,paged:Number},methods:{updateProduct:function(t,e){this.$emit("update-product",t,e)},toggleModal:function(t){this.$emit("toggle-modal",t)},toggleHot:function(t,e){this.$emit("toggle-hot",e,t.target.checked)},toggleEnabled:function(t,e){this.$emit("toggle-enabled",e,t.target.checked)},deleteProduct:function(t){this.$emit("delete-product",t)},triggerDelete:function(t){var e=this,i="確認刪除「".concat(this.products[t].title,"」嗎？");this.$swal({icon:"warning",text:i,showCancelButton:!0,reverseButtons:!0,confirmButtonText:"確定",cancelButtonText:"取消"}).then((function(i){var o=i.isConfirmed;return!!o&&e.deleteProduct(t)}))}}}),c=s,d=(i("d065"),i("2877")),u=Object(d["a"])(c,r,a,!1,null,"62dc0877",null),l=u.exports,g=i("1799"),p=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"modal fade bd-example-modal-xl",attrs:{tabindex:"-1",role:"dialog","aria-labelledby":"productModal","aria-hidden":"true",id:"productModal"}},[i("div",{staticClass:"modal-dialog modal-xl"},[i("div",{staticClass:"modal-content"},[i("div",{staticClass:"modal-body"},[i("div",{staticClass:"container-fluid"},[i("div",{staticClass:"row"},[i("div",{staticClass:"col-sm-4"},[t._l(5,(function(e){return[i("div",{key:t.editingProduct.id+"_"+e,staticClass:"form-group"},[i("label",{attrs:{for:"imageUrl_"+e}},[t._v("圖片網址")]),i("input",{directives:[{name:"model",rawName:"v-model.lazy",value:t.editingProduct.imageUrl[e-1],expression:"editingProduct.imageUrl[index - 1]",modifiers:{lazy:!0}}],staticClass:"form-control",attrs:{type:"text",id:"imageUrl_"+e},domProps:{value:t.editingProduct.imageUrl[e-1]},on:{change:[function(i){return t.$set(t.editingProduct.imageUrl,e-1,i.target.value)},function(e){t.editingProduct.imageUrl=t.filterImageUrl}]}})]),i("img",{directives:[{name:"show",rawName:"v-show",value:t.editingProduct.imageUrl[e-1],expression:"editingProduct.imageUrl[index - 1]"}],key:"img_"+t.editingProduct.id+"_"+e,staticClass:"img-fluid mb-2",attrs:{src:t.editingProduct.imageUrl[e-1],alt:t.editingProduct.title+"_"+e}})]})),i("div",{directives:[{name:"show",rawName:"v-show",value:!(t.editingProduct.imageUrl.length>=5),expression:"!(editingProduct.imageUrl.length >= 5)"}],staticClass:"input-group"},[t._m(0),i("div",{staticClass:"input-group-append"},[i("button",{staticClass:"btn btn-outline-primary",attrs:{type:"button",id:"upload-img"},on:{click:t.uploadImg}},[t._v(" 開始上傳 ")])])])],2),i("div",{staticClass:"col-sm-8"},[i("div",{staticClass:"form-group"},[i("label",{attrs:{for:"title"}},[t._v("商品名稱")]),i("input",{directives:[{name:"model",rawName:"v-model",value:t.editingProduct.title,expression:"editingProduct.title"}],staticClass:"form-control",attrs:{type:"text",name:"title",id:"title"},domProps:{value:t.editingProduct.title},on:{input:function(e){e.target.composing||t.$set(t.editingProduct,"title",e.target.value)}}})]),i("div",{staticClass:"form-row"},[i("div",{staticClass:"col"},[i("div",{staticClass:"form-group"},[i("label",{attrs:{for:"category"}},[t._v("商品分類")]),i("input",{directives:[{name:"model",rawName:"v-model",value:t.editingProduct.category,expression:"editingProduct.category"}],staticClass:"form-control",attrs:{type:"text",name:"category",id:"category"},domProps:{value:t.editingProduct.category},on:{input:function(e){e.target.composing||t.$set(t.editingProduct,"category",e.target.value)}}})])]),i("div",{staticClass:"col"},[i("div",{staticClass:"form-group"},[i("label",{attrs:{for:"stock"}},[t._v("庫存")]),i("input",{directives:[{name:"model",rawName:"v-model.number",value:t.editingProduct.options.stock,expression:"editingProduct.options.stock",modifiers:{number:!0}}],staticClass:"form-control",attrs:{type:"number",name:"stock",id:"stock",min:"0"},domProps:{value:t.editingProduct.options.stock},on:{input:function(e){e.target.composing||t.$set(t.editingProduct.options,"stock",t._n(e.target.value))},blur:function(e){return t.$forceUpdate()}}})])]),i("div",{staticClass:"col"},[i("div",{staticClass:"form-group"},[i("label",{attrs:{for:"unit"}},[t._v("單位")]),i("input",{directives:[{name:"model",rawName:"v-model",value:t.editingProduct.unit,expression:"editingProduct.unit"}],staticClass:"form-control",attrs:{type:"text",name:"unit",id:"unit"},domProps:{value:t.editingProduct.unit},on:{input:function(e){e.target.composing||t.$set(t.editingProduct,"unit",e.target.value)}}})])])]),i("div",{staticClass:"form-row"},[i("div",{staticClass:"col"},[i("div",{staticClass:"form-group"},[i("label",{attrs:{for:"origin_price"}},[t._v("原價")]),i("input",{directives:[{name:"model",rawName:"v-model.number",value:t.editingProduct.origin_price,expression:"editingProduct.origin_price",modifiers:{number:!0}}],staticClass:"form-control",attrs:{type:"number",name:"origin_price",id:"origin_price",min:"0"},domProps:{value:t.editingProduct.origin_price},on:{input:function(e){e.target.composing||t.$set(t.editingProduct,"origin_price",t._n(e.target.value))},blur:function(e){return t.$forceUpdate()}}})])]),i("div",{staticClass:"col"},[i("div",{staticClass:"form-group"},[i("label",{attrs:{for:"price"}},[t._v("售價")]),i("input",{directives:[{name:"model",rawName:"v-model.number",value:t.editingProduct.price,expression:"editingProduct.price",modifiers:{number:!0}}],staticClass:"form-control",attrs:{type:"number",name:"price",id:"price",min:"0"},domProps:{value:t.editingProduct.price},on:{input:function(e){e.target.composing||t.$set(t.editingProduct,"price",t._n(e.target.value))},blur:function(e){return t.$forceUpdate()}}})])]),i("div",{staticClass:"col"})]),i("div",{staticClass:"form-row"},[i("div",{staticClass:"col"},[i("label",{attrs:{for:"content"}},[t._v("商品簡述")]),i("textarea",{directives:[{name:"model",rawName:"v-model",value:t.editingProduct.content,expression:"editingProduct.content"}],staticClass:"form-control",attrs:{id:"content",rows:"3"},domProps:{value:t.editingProduct.content},on:{input:function(e){e.target.composing||t.$set(t.editingProduct,"content",e.target.value)}}})])]),i("div",{staticClass:"form-row mt-3"},[i("div",{staticClass:"col"},[i("label",{attrs:{for:"description"}},[t._v("商品說明")]),i("vue-editor",{attrs:{customModules:t.customModulesForEditor,editorOptions:t.editorSettings},model:{value:t.editingProduct.description,callback:function(e){t.$set(t.editingProduct,"description",e)},expression:"editingProduct.description"}})],1)]),i("div",{staticClass:"form-row mt-3"},[i("div",{staticClass:"col"},[i("div",{staticClass:"custom-control custom-switch"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.editingProduct.enabled,expression:"editingProduct.enabled"}],staticClass:"custom-control-input",attrs:{type:"checkbox",id:"enabled"},domProps:{checked:Array.isArray(t.editingProduct.enabled)?t._i(t.editingProduct.enabled,null)>-1:t.editingProduct.enabled},on:{change:function(e){var i=t.editingProduct.enabled,o=e.target,n=!!o.checked;if(Array.isArray(i)){var r=null,a=t._i(i,r);o.checked?a<0&&t.$set(t.editingProduct,"enabled",i.concat([r])):a>-1&&t.$set(t.editingProduct,"enabled",i.slice(0,a).concat(i.slice(a+1)))}else t.$set(t.editingProduct,"enabled",n)}}}),i("label",{staticClass:"custom-control-label",attrs:{for:"enabled"}},[t._v("是否上架？")])])]),i("div",{staticClass:"col"},[i("div",{staticClass:"custom-control custom-switch"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.editingProduct.options.hot,expression:"editingProduct.options.hot"}],staticClass:"custom-control-input",attrs:{type:"checkbox",id:"hot"},domProps:{checked:Array.isArray(t.editingProduct.options.hot)?t._i(t.editingProduct.options.hot,null)>-1:t.editingProduct.options.hot},on:{change:function(e){var i=t.editingProduct.options.hot,o=e.target,n=!!o.checked;if(Array.isArray(i)){var r=null,a=t._i(i,r);o.checked?a<0&&t.$set(t.editingProduct.options,"hot",i.concat([r])):a>-1&&t.$set(t.editingProduct.options,"hot",i.slice(0,a).concat(i.slice(a+1)))}else t.$set(t.editingProduct.options,"hot",n)}}}),i("label",{staticClass:"custom-control-label",attrs:{for:"hot"}},[t._v("是否為熱門商品？")])])])])])])])]),i("div",{staticClass:"modal-footer"},[i("button",{staticClass:"btn btn-secondary",attrs:{type:"button","data-dismiss":"modal"}},[t._v("取消")]),i("button",{directives:[{name:"show",rawName:"v-show",value:!t.isCreating,expression:"!isCreating"}],staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:function(e){return t.save("edit")}}},[t._v(" 儲存修改 ")]),i("button",{directives:[{name:"show",rawName:"v-show",value:t.isCreating,expression:"isCreating"}],staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:function(e){return t.save("new")}}},[t._v(" 新增商品 ")])])])])])},f=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"custom-file"},[i("input",{staticClass:"custom-file-input",attrs:{type:"file",id:"input-img","aria-describedby":"upload-img"}}),i("label",{staticClass:"custom-file-label",attrs:{for:"input-img"}})])}],m=i("2f54"),h=m["a"],v=(i("2865"),Object(d["a"])(h,p,f,!1,null,"3db04cc4",null)),b=v.exports,P={components:{BProductsTable:l,Pagination:g["a"],EditingModal:b},props:{token:String,tokenReady:Boolean},data:function(){return{baseUrl:"https://course-ec-api.hexschool.io/api/",uuid:"0ace4b59-2bf0-443c-968c-4c9a458d1cb9",products:[],productTemplate:{title:"",category:"",content:"",description:"",imageUrl:[],enabled:!0,origin_price:0,price:0,unit:"",options:{hot:!0,stock:0}},editingProduct:{title:"",category:"",content:"",description:"",imageUrl:[],enabled:!0,origin_price:0,price:0,unit:"",options:{hot:!0,stock:0}},editingIndex:0,editingId:"",totalPage:1,page:1,paged:15,isCreating:!0}},methods:{getProducts:function(){var t=this,e=this.$loading.show(),i="".concat(this.baseUrl).concat(this.uuid,"/admin/ec/products?page=").concat(this.page,"&paged=").concat(this.paged);this.axios.get(i).then((function(i){e.hide(),t.totalPage=i.data.meta.pagination.total_pages,t.products=i.data.data,t.products.forEach((function(e,i){e.options&&(t.products[i].options=JSON.parse(e.options))}))})).catch((function(){e.hide()}))},createProduct:function(){var t=this,e=this.$loading.show(),i="".concat(this.baseUrl).concat(this.uuid,"/admin/ec/product"),o=this._.cloneDeep(this.editingProduct);o.options=JSON.stringify(o.options),this.axios.post(i,o).then((function(){e.hide(),t.editingProduct=t._.cloneDeep(t.productTemplate),t.page=1,t.getProducts(),t.$refs.editingModal.closeEditingModal()})).catch((function(){e.hide()}))},getProduct:function(t,e,i){var o=this,n=this.$loading.show(),r="".concat(this.baseUrl).concat(this.uuid,"/admin/ec/product/").concat(e);this.axios.get(r).then((function(e){n.hide(),o.products[t].description=e.data.data.description,i()})).catch((function(){n.hide()}))},updateProduct:function(t){var e=this,i=this.$loading.show();(t||0===t)&&(this.editingIndex=t,this.editingId=this.products[t].id,this.editingProduct=this._.cloneDeep(this.products[t])),Object.keys(this.products[this.editingIndex]).forEach((function(t){e.products[e.editingIndex][t]=e._.cloneDeep(e.editingProduct[t])}));var o="".concat(this.baseUrl).concat(this.uuid,"/admin/ec/product/").concat(this.editingId),n=this._.cloneDeep(this.products.find((function(t){return t.id===e.editingId})));n.options=JSON.stringify(n.options),this.axios.patch(o,n).then((function(){i.hide(),e.$refs.editingModal.closeEditingModal()})).catch((function(){i.hide()}))},deleteProduct:function(t){var e=this,i=this.$loading.show(),o=this.products[t].id,n="".concat(this.baseUrl).concat(this.uuid,"/admin/ec/product/").concat(o);this.axios.delete(n).then((function(){i.hide(),e.getProducts()})).catch((function(){i.hide()}))},toggleModal:function(t){var e=this;"new"===t?(this.isCreating=!0,this.editingProduct=this._.cloneDeep(this.productTemplate),this.$refs.editingModal.openEditingModal()):(this.isCreating=!1,this.editingIndex=t,this.editingId=this.products[t].id,this.getProduct(this.editingIndex,this.editingId,(function(){e.editingProduct=e._.cloneDeep(e.products[t]),e.$refs.editingModal.openEditingModal()})))},toggleEnabled:function(t,e){this.products[t].enabled=e,this.updateProduct(t)},toggleHot:function(t,e){this.products[t].options.hot=e,this.updateProduct(t)},handleFormAlert:function(t){this.$swal({icon:"error",html:t})},saveProduct:function(t,e){this.editingProduct=this._.cloneDeep(e),"new"===t?this.createProduct():"edit"===t&&this.updateProduct()},changePage:function(t){this.products=[],this.page=t,this.getProducts()}},created:function(){this.tokenReady&&this.getProducts()},watch:{tokenReady:function(t){t&&this.getProducts()}}},y=P,C=(i("2247"),Object(d["a"])(y,o,n,!1,null,"f2165024",null));e["default"]=C.exports},b0c0:function(t,e,i){var o=i("83ab"),n=i("9bf2").f,r=Function.prototype,a=r.toString,s=/^\s*function ([^ (]*)/,c="name";o&&!(c in r)&&n(r,c,{configurable:!0,get:function(){try{return a.call(this).match(s)[1]}catch(t){return""}}})},b64b:function(t,e,i){var o=i("23e7"),n=i("7b0b"),r=i("df75"),a=i("d039"),s=a((function(){r(1)}));o({target:"Object",stat:!0,forced:s},{keys:function(t){return r(n(t))}})},d065:function(t,e,i){"use strict";var o=i("84b8"),n=i.n(o);n.a},e01a:function(t,e,i){"use strict";var o=i("23e7"),n=i("83ab"),r=i("da84"),a=i("5135"),s=i("861d"),c=i("9bf2").f,d=i("e893"),u=r.Symbol;if(n&&"function"==typeof u&&(!("description"in u.prototype)||void 0!==u().description)){var l={},g=function(){var t=arguments.length<1||void 0===arguments[0]?void 0:String(arguments[0]),e=this instanceof g?new u(t):void 0===t?u():u(t);return""===t&&(l[e]=!0),e};d(g,u);var p=g.prototype=u.prototype;p.constructor=g;var f=p.toString,m="Symbol(test)"==String(u("test")),h=/^Symbol\((.*)\)[^)]+$/;c(p,"description",{configurable:!0,get:function(){var t=s(this)?this.valueOf():this,e=f.call(t);if(a(l,t))return"";var i=m?e.slice(7,-1):e.replace(h,"$1");return""===i?void 0:i}}),o({global:!0,forced:!0},{Symbol:g})}},e538:function(t,e,i){var o=i("b622");e.f=o}}]);
//# sourceMappingURL=chunk-a480f736.c978827f.js.map